# CCTV 분석기
동영상 화면의 특정 부분에서 움직임이 감지되는 타임트랙을 추출합니다.

## 설치하기
- MP4 파일을 분석하기 위해서는 아래링크에서 코덱필터를 설치하셔야 합니다. cctv.zip 파일을 다운로드 하셨다면 함께 첨부되어 있습니다.
- https://www.videohelp.com/download/LAVFilters-0.76.1-Installer.exe

## 실행하기
- cctv.zip 파일을 다운로드 하셨다면 main.exe 파일이 실행하시면 됩니다.

## 기능설명
1. 처음 실행하면 아래와 같은 화면이 나타날겁니다. 아무정보도 존재하지 않는 상태죠.
   - ![image](https://user-images.githubusercontent.com/15623847/197341614-50a00e5b-2710-4d38-a62f-7f02ca2bec85.png)

2. 먼저 추적할 파일(들)을 추가합니다. <파일추가> 버튼을 클릭해서 파일(들)을 선택해주세요.
   - ![image](https://user-images.githubusercontent.com/15623847/197341644-46e21310-53d9-4af9-9cd6-838d5481a2df.png)
   
3. 그럼 아래처럼 선택한 파일이 파일리스트에 추가됩니다. 그러면 추적할 파일을 더블클릭합니다. 그러면 아래처럼 첫프레임 화면이 나타납니다.
   - ![image](https://user-images.githubusercontent.com/15623847/197341752-71c6c57d-38e8-454a-b6ef-3ef0d00a5ce2.png)
   
4. 포착영역을 설정합니다. 연두색 박스의 우측하단 검정색박스를 드래그하면 크기를 조절할 수 있습니다. 연두색박스 내부를 드래그 앤 드롭하면 영역을 이동시킬 수 있습니다.
   - ![image](https://user-images.githubusercontent.com/15623847/197341810-c00d7712-c6d7-4a15-a197-5d27860e0195.png)

5. 이제 <설정> 버튼을 클릭해주세요. 그럼 아래와 같은 설정값들을 지정할 수 있는데요. 하나씩 설명해드리면 아래와 같습니다.
   - ![image](https://user-images.githubusercontent.com/15623847/197341838-3b0e8f23-00bf-473a-a40e-96ac11d2961d.png)
   - 배속지정 : 재생할 때의 속도를 지정합니다. 0.1 ~ 10배속까지 지정할 수 있습니다. 1보다 크면 빠르게 재생하는 것이고, 1보다 작으면 느리게 재생하는게 됩니다.
   - 포착간격 : 위에서 지정한 포착영역안의 화면을 몇 초 간격으로 살펴보고 변화가 있는지 감지하는지를 지정합니다. 위 화면에서는 그러니까 1초마다 화면 차이를 측정합니다.
   - 포착트랙간 공백 : 예를들어 설명해 보겠습니다. 30분에서 31분까지 움직임이 감지되었는데, 그 후에 움직임이 없다가 31분 11초에 또 다시 움직임이 감지되면 2개의 "타임트랙"이 생깁니다. 반면에 31분 5초에 움직임이 감지되면 앞선 30분부터 같은 "타임트랙"으로 간주합니다. 즉 10초 이상으로 움직임 없는 구간이 존재하면 "타임트랙"을 끊어서 가겠다는 의미입니다.
   - 포착트랙 최소길이 : 움직임이 감지된 구간의 길이가 최소 3초는 되어야 "타임트랙"에 추가시키겠다는 의미입니다.
   - 포착크기 : 너무 작은 물체의 움직임은 감지하지 않기위해서 사용하는 값 입니다. 화면에 따라 달라지는 상대적인 값이라 사용하시는 CCTV 화면 특성에 맞게 적절히 조절하셔야 합니다. 예제화면에서는 300정도면 사람의 움직임을 찾아냅니다.
   
6. 모든 설정이 끝났으니 이제 <포착시작> 버튼을 클릭합니다. 100%가 완성되는데 시간이 어느정도 소요됩니다. 중간에 <포착 일시정지>를 클릭해서 중간중간의 결과물을 확인할 수 있습니다. 아예 중단하고 싶으면 <포착종료> 버튼을 클릭하세요. 모든 포착이 완료되면 아래와 같이 "타임트랙"들이 발생합니다. 각각의 "타임트랙"을 더블클릭하면 해당 구간을 연속재생합니다.
   - ![image](https://user-images.githubusercontent.com/15623847/197342286-235b593d-4119-4b2a-9eec-6a48272750be.png)
   
7. 이때 일시정지를 누르고 다시 재생을 하면 연속재생이 해제되고 그 구간부터 끝까지 재생하게 됩니다. 
8. 혹시라도 찾고싶은 상황이 포착되지 않을 수 있습니다. 그러나 포착된 타임트랙을 바탕으로 정황파악을 한 후에 타임트랙 사이사이의 시간을 재생하면서 돌려보면 더 쉽게 문제의 상황을 찾으실 수 있을겁니다.

## 실제 사용예
- 아래 블로그 포스팅을 함께 보시면 좋습니다.



